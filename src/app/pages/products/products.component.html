<div
    class="w-full min-h-screen px-4 mx-auto sm:max-w-screen-sm md:max-w-screen-md lg:max-w-screen-lg xl:max-w-screen-xl mt-2 md:mt-20">

    @if (cargando()) {
    <div class="mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        @for (item of placeholderItems(); track $index) {
        <div class="p-4">
            <p-card [style]="{ width: '100%', overflow: 'hidden', border: '1px solid var(--surface-300)' }">
                <ng-template pTemplate="header">
                    <p-skeleton width="100%" height="200px"></p-skeleton>
                </ng-template>

                <ng-template pTemplate="title">
                    <p-skeleton width="60%"></p-skeleton>
                </ng-template>

                <ng-template pTemplate="subtitle">
                    <p-skeleton width="40%"></p-skeleton>
                </ng-template>

                <div>
                    <h2>
                        <p-skeleton width="50%"></p-skeleton>
                    </h2>
                    <h3 class="text-surface-500">
                        <p-skeleton width="40%"></p-skeleton>
                    </h3>
                </div>

                <ng-template pTemplate="footer">
                    <div class="flex gap-4 mt-1">
                        <p-button label="Detalles" icon="pi pi-eye" severity="secondary" class="w-full"
                            [outlined]="true" disabled />
                        <p-button label="Descargar" icon="pi pi-file-pdf" class="w-full" styleClass="w-full"
                            disabled />
                    </div>
                </ng-template>
            </p-card>
        </div>
        }
    </div>
    }

    <!-- Cuando ya cargó los productos -->
    @if (!cargando()) {
    <div class="mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        @for (producto of productos(); track producto._id) {
        <div class="mb-4 flex items-center justify-center">
            <p-card [style]="{ width: '100%', overflow: 'hidden' }">
                <ng-template pTemplate="header">
                    <img alt="Card" class="w-full" [src]="producto.galeria[0]" [alt]="producto.nombre" />
                </ng-template>
                <ng-template pTemplate="title"> <small>{{producto.codigo | uppercase}}-{{producto.nombre}}</small>
                </ng-template>
                <ng-template pTemplate="subtitle"> <span class="text-primary font-bold">
                        {{producto.precio | currency: 'S/ '}} </span>
                </ng-template>
                <p class="text-sm">
                    {{producto.descripcion | slice:0:70}}...
                </p>
                <ng-template pTemplate="footer">
                    <div class="flex gap-4 mt-1">
                        <p-button label="Detalles" icon="pi pi-eye" severity="contrast" class="w-full"
                            [outlined]="true" styleClass="w-full" [routerLink]="['/products', producto.slug]" />

                            <a [href]="producto.ficha_tecnica" target="_blank" class="w-full" styleClass="w-full">
                                <p-button label="F. técnica" icon="pi pi-file-pdf"
                                    [disabled]="!producto.ficha_tecnica" class="w-full" styleClass="w-full"/>
                            </a>
                    </div>
                </ng-template>
            </p-card>
        </div>
        }
    </div>
    }

</div>